version: '3.8'

services:
  stocks:
    build: .
    restart: unless-stopped
    volumes:
      - shared-volume:/app/data
    ports:
      - "8005:8003"  # MCP API
      - "8006:8080"  # Dashboard
    environment:
      - TZ=America/Los_Angeles
      - HOST=paper
      - PORT=4004
      - IB_CLIENT_ID=80
      - ACCOUNT=DU123456
      - TELEGRAM_TOKEN=1764833292:AAEZWcMIdKiLVGZRjZpkm0rAHJAKjtZyMpA
      - TELEGRAM_CHAT_ID=1780930883
      - ORB_PERIOD_MINUTES=30
      - RISK_PERCENTAGE=5
      - MAX_POSITIONS=10
      - MIN_PRICE=5.00
      - MAX_PRICE=100.00
      - MIN_VOLUME=100000
      - MIN_PRE_MARKET_CHANGE=2.0
      - STAGNATION_MINUTES=240
      - INITIAL_STOP_LOSS_RATIO=0.5
      - TRAILING_STOP_RATIO=0.25
      - TAKE_PROFIT_RATIO=1.5
      - MIN_RANGE_PCT=0.5
      - MAX_RANGE_PCT=3.0
      - VOLUME_LOOKBACK_DAYS=20
      - VOLUME_ZSCORE_THRESHOLD=1.0
    networks:
      - algolearn_network

volumes:
  shared-volume:

networks:
  algolearn_network:
    external: true
